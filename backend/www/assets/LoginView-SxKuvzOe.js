import{d as x,u as S,c as a,a as t,b as s,t as l,e as h,w as V,f,v as w,n as v,g as _,h as A,i as C,r as u,j as N,k as B,o as r}from"./index-C3AN9eop.js";const M={key:0,class:"admin-login-icon"},q={key:1,class:"auth-logo"},z={class:"auth-title"},L={class:"auth-subtitle"},U={key:2,class:"alert alert-error"},j={class:"form-group"},D={class:"form-group"},P=["disabled"],R={key:3,class:"auth-footer"},H=x({__name:"LoginView",setup(T){const y=B(),d=S(),m=u(""),p=u(""),n=u(""),i=u(!1),o=window.location.hostname.startsWith("admin.");async function b(){n.value="",i.value=!0;try{if(await d.login(m.value.trim(),p.value.trim()),o&&!d.isAdmin){d.logout(),n.value="Access denied. Admin privileges required.";return}y.push(o?"/admin":"/app")}catch(g){const e=g;n.value=e.response?.data?.error||"Login failed."}finally{i.value=!1}}return(g,e)=>{const k=N("router-link");return r(),a("div",{class:v(["auth-page",{"admin-login-page":s(o)}])},[t("div",{class:v(["auth-card",{"admin-login-card":s(o)}])},[s(o)?(r(),a("div",M,[...e[2]||(e[2]=[t("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},[t("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})],-1)])])):(r(),a("div",q,"ðŸ’¬")),t("h1",z,l(s(o)?"Admin Panel":"Simple Messenger"),1),t("p",L,l(s(o)?"Authorized personnel only":"Sign in to your account"),1),n.value?(r(),a("div",U,l(n.value),1)):h("",!0),t("form",{onSubmit:V(b,["prevent"]),novalidate:""},[t("div",j,[e[3]||(e[3]=t("label",{for:"username"},"Username",-1)),f(t("input",{id:"username","onUpdate:modelValue":e[0]||(e[0]=c=>m.value=c),type:"text",autocomplete:"username",placeholder:"your_username",minlength:"3",maxlength:"32",required:""},null,512),[[w,m.value]])]),t("div",D,[e[4]||(e[4]=t("label",{for:"password"},"Password",-1)),f(t("input",{id:"password","onUpdate:modelValue":e[1]||(e[1]=c=>p.value=c),type:"password",autocomplete:"current-password",placeholder:"------",minlength:"6",maxlength:"128",required:""},null,512),[[w,p.value]])]),t("button",{type:"submit",class:v(["btn","btn-full",s(o)?"btn-admin":"btn-primary"]),disabled:i.value},l(i.value?"Signing in...":"Sign in"),11,P)],32),s(o)?h("",!0):(r(),a("p",R,[e[6]||(e[6]=_(" No account? ",-1)),A(k,{to:"/register"},{default:C(()=>[...e[5]||(e[5]=[_("Register",-1)])]),_:1})]))],2)],2)}}});export{H as default};
