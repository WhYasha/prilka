import{g as f}from"./admin-BLvPyki-.js";import{H as g,aB as e,r as s,s as t,a$ as o,F as i,aL as v,am as k,q as _,o as p,at as w,ak as B,z as h,aJ as b}from"./runtime-core.esm-bundler-DriOm3-t.js";import"./index-BLOxppfk.js";import"./index-Cmf1cu1q.js";import"./pinia-CHGKEwD6.js";const C={key:0,class:"admin-chart-section"},M={class:"bar-chart"},$={class:"bar-label"},x={class:"bar-value"},y=g({__name:"BarChart",props:{title:{},data:{}},setup(u){const a=u,d=p(()=>Math.max(...a.data.map(l=>l.count),1));function c(l){return Math.round(l/d.value*100)}function m(l){return l?l.substring(5):""}return(l,r)=>u.data.length?(e(),s("div",C,[t("h3",null,o(u.title),1),t("div",M,[(e(!0),s(i,null,v(u.data,n=>(e(),s("div",{key:n.day,class:"bar-row"},[t("span",$,o(m(n.day)),1),t("div",{class:"bar-fill",style:k({width:c(n.count)+"%"})},null,4),t("span",x,o(n.count),1)]))),128))])])):_("",!0)}}),D={key:0},N={class:"admin-stats-grid"},T={class:"stat-value"},U={class:"stat-label"},z={key:0,class:"admin-stats-grid"},A={class:"stat-value"},L={class:"stat-label"},H=g({__name:"AdminDashboard",setup(u){const a=b(null),d=b(!0),c=p(()=>a.value?[{label:"Total Users",value:a.value.total_users},{label:"DAU (24h)",value:a.value.dau},{label:"WAU (7d)",value:a.value.wau},{label:"New Today",value:a.value.new_users_today},{label:"Total Chats",value:a.value.total_chats},{label:"Total Messages",value:a.value.total_messages},{label:"Messages Today",value:a.value.messages_today},{label:"Blocked Users",value:a.value.blocked_users}]:[]);return w(async()=>{try{a.value=await f()}finally{d.value=!1}}),(m,l)=>(e(),s("div",null,[l[0]||(l[0]=t("h1",{class:"admin-page-title"},"Dashboard",-1)),d.value?(e(),s("p",D,"Loading stats...")):a.value?(e(),s(i,{key:1},[t("div",N,[(e(!0),s(i,null,v(c.value,r=>(e(),s("div",{key:r.label,class:"admin-stat-card"},[t("div",T,o(r.value),1),t("div",U,o(r.label),1)]))),128))]),a.value.chats_by_type?(e(),s("div",z,[(e(!0),s(i,null,v(a.value.chats_by_type,(r,n)=>(e(),s("div",{key:n,class:"admin-stat-card"},[t("div",A,o(r),1),t("div",L,[t("span",{class:B(["badge","badge-"+n])},o(n),3)])]))),128))])):_("",!0),h(y,{title:"New Registrations (14 days)",data:a.value.reg_trend||[]},null,8,["data"]),h(y,{title:"Messages (14 days)",data:a.value.msg_trend||[]},null,8,["data"])],64)):_("",!0)]))}});export{H as default};
