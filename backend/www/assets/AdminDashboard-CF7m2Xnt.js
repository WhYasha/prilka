import{g as f}from"./admin-B9z3yz2N.js";import{d as g,c as t,a as e,t as o,F as c,A as v,e as _,o as s,y as k,p,G as w,h as m,r as b,n as C}from"./index-DIww7dJL.js";const M={key:0,class:"admin-chart-section"},x={class:"bar-chart"},B={class:"bar-label"},D={class:"bar-value"},y=g({__name:"BarChart",props:{title:{},data:{}},setup(r){const a=r,d=p(()=>Math.max(...a.data.map(l=>l.count),1));function i(l){return Math.round(l/d.value*100)}function h(l){return l?l.substring(5):""}return(l,u)=>r.data.length?(s(),t("div",M,[e("h3",null,o(r.title),1),e("div",x,[(s(!0),t(c,null,v(r.data,n=>(s(),t("div",{key:n.day,class:"bar-row"},[e("span",B,o(h(n.day)),1),e("div",{class:"bar-fill",style:k({width:i(n.count)+"%"})},null,4),e("span",D,o(n.count),1)]))),128))])])):_("",!0)}}),N={key:0},T={class:"admin-stats-grid"},$={class:"stat-value"},A={class:"stat-label"},U={key:0,class:"admin-stats-grid"},S={class:"stat-value"},V={class:"stat-label"},L=g({__name:"AdminDashboard",setup(r){const a=b(null),d=b(!0),i=p(()=>a.value?[{label:"Total Users",value:a.value.total_users},{label:"DAU (24h)",value:a.value.dau},{label:"WAU (7d)",value:a.value.wau},{label:"New Today",value:a.value.new_users_today},{label:"Total Chats",value:a.value.total_chats},{label:"Total Messages",value:a.value.total_messages},{label:"Messages Today",value:a.value.messages_today},{label:"Blocked Users",value:a.value.blocked_users}]:[]);return w(async()=>{try{a.value=await f()}finally{d.value=!1}}),(h,l)=>(s(),t("div",null,[l[0]||(l[0]=e("h1",{class:"admin-page-title"},"Dashboard",-1)),d.value?(s(),t("p",N,"Loading stats...")):a.value?(s(),t(c,{key:1},[e("div",T,[(s(!0),t(c,null,v(i.value,u=>(s(),t("div",{key:u.label,class:"admin-stat-card"},[e("div",$,o(u.value),1),e("div",A,o(u.label),1)]))),128))]),a.value.chats_by_type?(s(),t("div",U,[(s(!0),t(c,null,v(a.value.chats_by_type,(u,n)=>(s(),t("div",{key:n,class:"admin-stat-card"},[e("div",S,o(u),1),e("div",V,[e("span",{class:C(["badge","badge-"+n])},o(n),3)])]))),128))])):_("",!0),m(y,{title:"New Registrations (14 days)",data:a.value.reg_trend||[]},null,8,["data"]),m(y,{title:"Messages (14 days)",data:a.value.msg_trend||[]},null,8,["data"])],64)):_("",!0)]))}});export{L as default};
