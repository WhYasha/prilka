import{d as N,G as A,c as n,a as t,f as b,v as V,H as x,R as S,Q as D,F as m,A as h,w as g,e as r,t as i,r as d,o as l,h as M,i as U,g as B,j as F}from"./index-DGLkj7HA.js";import{a as L}from"./admin-C35w_YoG.js";const $={class:"admin-filter-bar"},I={key:0},T={class:"admin-table-wrap"},K={class:"admin-table"},P={key:0,class:"badge badge-blocked"},Q={key:1,class:"badge badge-inactive"},j={key:2,class:"badge badge-active"},q={key:3,class:"badge badge-admin"},E={key:0,class:"admin-pagination"},G={key:0,class:"current"},H=["onClick"],R={key:2},z={class:"admin-pagination info"},Y=N({__name:"AdminUsers",setup(J){const o=d(null),_=d(!0),v=d(""),p=d(""),s=d(1);async function c(){_.value=!0;try{o.value=await L({page:s.value,per_page:20,q:v.value||void 0,status:p.value||void 0})}finally{_.value=!1}}function y(){s.value=1,c()}function C(){v.value="",p.value="",s.value=1,c()}function k(u){s.value=u,c()}function f(u){if(!u)return"-";const a=new Date(u);return isNaN(a.getTime())?u:a.toLocaleString()}return A(c),(u,a)=>{const w=F("router-link");return l(),n("div",null,[a[7]||(a[7]=t("h1",{class:"admin-page-title"},"Users",-1)),t("div",$,[b(t("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>v.value=e),type:"text",placeholder:"Search username / display name",onKeydown:x(y,["enter"])},null,544),[[V,v.value]]),b(t("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e)},[...a[4]||(a[4]=[D('<option value="">All</option><option value="active">Active</option><option value="blocked">Blocked</option><option value="admin">Admin</option><option value="inactive">Inactive</option>',5)])],512),[[S,p.value]]),t("button",{class:"btn btn-primary",onClick:y},"Filter"),t("button",{class:"btn btn-muted",onClick:C},"Clear")]),_.value?(l(),n("p",I,"Loading...")):o.value?(l(),n(m,{key:1},[t("div",T,[t("table",K,[a[6]||(a[6]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Username"),t("th",null,"Display Name"),t("th",null,"Status"),t("th",null,"Created"),t("th",null,"Last Active"),t("th")])],-1)),t("tbody",null,[(l(!0),n(m,null,h(o.value.users,e=>(l(),n("tr",{key:e.id},[t("td",null,i(e.id),1),t("td",null,i(e.username),1),t("td",null,i(e.display_name),1),t("td",null,[e.is_blocked?(l(),n("span",P,"Blocked")):e.is_active?(l(),n("span",j,"Active")):(l(),n("span",Q,"Inactive")),e.is_admin?(l(),n("span",q,"Admin")):r("",!0)]),t("td",null,i(f(e.created_at)),1),t("td",null,i(f(e.last_activity)),1),t("td",null,[M(w,{to:`/admin/users/${e.id}`},{default:U(()=>[...a[5]||(a[5]=[B("View",-1)])]),_:1},8,["to"])])]))),128))])])]),o.value.total_pages>1?(l(),n("div",E,[s.value>1?(l(),n("a",{key:0,href:"#",onClick:a[2]||(a[2]=g(e=>k(s.value-1),["prevent"]))},"« Prev")):r("",!0),(l(!0),n(m,null,h(o.value.total_pages,e=>(l(),n(m,{key:e},[e===s.value?(l(),n("span",G,i(e),1)):Math.abs(e-s.value)<3||e===1||e===o.value.total_pages?(l(),n("a",{key:1,href:"#",onClick:g(O=>k(e),["prevent"])},i(e),9,H)):Math.abs(e-s.value)===3?(l(),n("span",R,"...")):r("",!0)],64))),128)),s.value<o.value.total_pages?(l(),n("a",{key:1,href:"#",onClick:a[3]||(a[3]=g(e=>k(s.value+1),["prevent"]))},"Next »")):r("",!0)])):r("",!0),t("span",z,i(o.value.total)+" total users",1)],64)):r("",!0)])}}});export{Y as default};
