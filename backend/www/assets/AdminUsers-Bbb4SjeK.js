import{o as N,w as x,m as V,s as y}from"./runtime-dom.esm-bundler-BK6IBOWL.js";import{a as A}from"./admin-DURzgcgM.js";import{H as S,at as B,aN as D,aB as n,r as l,s as t,bp as f,x as M,F as m,aL as h,a$ as i,q as u,z as U,bn as F,y as L,aJ as d}from"./runtime-core.esm-bundler-DriOm3-t.js";import"./index-DKTJyLdB.js";import"./index-dWvJ5vCQ.js";import"./pinia-CHGKEwD6.js";const $={class:"admin-filter-bar"},I={key:0},T={class:"admin-table-wrap"},q={class:"admin-table"},K={key:0,class:"badge badge-blocked"},P={key:1,class:"badge badge-inactive"},z={key:2,class:"badge badge-active"},E={key:3,class:"badge badge-admin"},H={key:0,class:"admin-pagination"},J={key:0,class:"current"},Q=["onClick"],j={key:2},G={class:"admin-pagination info"},ae=S({__name:"AdminUsers",setup(O){const o=d(null),_=d(!0),v=d(""),p=d(""),s=d(1);async function c(){_.value=!0;try{o.value=await A({page:s.value,per_page:20,q:v.value||void 0,status:p.value||void 0})}finally{_.value=!1}}function g(){s.value=1,c()}function C(){v.value="",p.value="",s.value=1,c()}function k(r){s.value=r,c()}function b(r){if(!r)return"-";const a=new Date(r);return isNaN(a.getTime())?r:a.toLocaleString()}return B(c),(r,a)=>{const w=D("router-link");return n(),l("div",null,[a[7]||(a[7]=t("h1",{class:"admin-page-title"},"Users",-1)),t("div",$,[f(t("input",{"onUpdate:modelValue":a[0]||(a[0]=e=>v.value=e),type:"text",placeholder:"Search username / display name",onKeydown:x(g,["enter"])},null,544),[[N,v.value]]),f(t("select",{"onUpdate:modelValue":a[1]||(a[1]=e=>p.value=e)},[...a[4]||(a[4]=[M('<option value="">All</option><option value="active">Active</option><option value="blocked">Blocked</option><option value="admin">Admin</option><option value="inactive">Inactive</option>',5)])],512),[[V,p.value]]),t("button",{class:"btn btn-primary",onClick:g},"Filter"),t("button",{class:"btn btn-muted",onClick:C},"Clear")]),_.value?(n(),l("p",I,"Loading...")):o.value?(n(),l(m,{key:1},[t("div",T,[t("table",q,[a[6]||(a[6]=t("thead",null,[t("tr",null,[t("th",null,"ID"),t("th",null,"Username"),t("th",null,"Display Name"),t("th",null,"Status"),t("th",null,"Created"),t("th",null,"Last Active"),t("th")])],-1)),t("tbody",null,[(n(!0),l(m,null,h(o.value.users,e=>(n(),l("tr",{key:e.id},[t("td",null,i(e.id),1),t("td",null,i(e.username),1),t("td",null,i(e.display_name),1),t("td",null,[e.is_blocked?(n(),l("span",K,"Blocked")):e.is_active?(n(),l("span",z,"Active")):(n(),l("span",P,"Inactive")),e.is_admin?(n(),l("span",E,"Admin")):u("",!0)]),t("td",null,i(b(e.created_at)),1),t("td",null,i(b(e.last_activity)),1),t("td",null,[U(w,{to:`/admin/users/${e.id}`},{default:F(()=>[...a[5]||(a[5]=[L("View",-1)])]),_:1},8,["to"])])]))),128))])])]),o.value.total_pages>1?(n(),l("div",H,[s.value>1?(n(),l("a",{key:0,href:"#",onClick:a[2]||(a[2]=y(e=>k(s.value-1),["prevent"]))},"« Prev")):u("",!0),(n(!0),l(m,null,h(o.value.total_pages,e=>(n(),l(m,{key:e},[e===s.value?(n(),l("span",J,i(e),1)):Math.abs(e-s.value)<3||e===1||e===o.value.total_pages?(n(),l("a",{key:1,href:"#",onClick:y(R=>k(e),["prevent"])},i(e),9,Q)):Math.abs(e-s.value)===3?(n(),l("span",j,"...")):u("",!0)],64))),128)),s.value<o.value.total_pages?(n(),l("a",{key:1,href:"#",onClick:a[3]||(a[3]=y(e=>k(s.value+1),["prevent"]))},"Next »")):u("",!0)])):u("",!0),t("span",G,i(o.value.total)+" total users",1)],64)):u("",!0)])}}});export{ae as default};
